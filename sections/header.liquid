{{ 'section-header.css' | asset_url | stylesheet_tag }}
<script src="{{ 'details-disclosure.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'details-modal.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>

{%- style -%}
  .header {
    top: 0;
    z-index: 50;
    transition: all 0.3s;
    padding: 0 1rem;
  }
  
  .header.scrolled {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }
  
  .header__inner {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 3rem;
    width: 100%;
  }
  
  .header__menu-trigger {
    color: inherit;
    transition: all 0.2s;
  }
  
  .header__menu-trigger:hover {
    color: #8b5cf6;
    transform: scale(1.05);
  }
  
  .header__brand {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-weight: bold;
    font-size: 1.125rem;
    letter-spacing: 0.05em;
    font-family: 'Playfair Display', serif;
  }
  
  .header__actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-left: auto;
  }
  
  .header__action-btn {
    height: 2rem;
    width: 2rem;
    color: inherit;
    transition: all 0.2s;
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .header__action-btn:hover {
    color: #8b5cf6;
    transform: scale(1.05);
  }
  
  .header__action-btn svg {
    height: 1rem;
    width: 1rem;
  }
  
  @media (max-width: 768px) {
    .header__brand {
      font-size: 1rem;
    }
  }
{%- endstyle -%}

<header class="header sticky" id="shopify-section-header">
  <div class="header__inner">
    <!-- Left - Menu trigger -->
    <div class="header__menu-section">
      <button class="header__menu-trigger header__action-btn" aria-label="Open menu">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>

    <!-- Center - Brand name (shown when scrolled) -->
    <div class="header__brand" style="opacity: 0;" id="brand-text">
      {{ section.settings.brand_name | default: shop.name }}
    </div>

    <!-- Right - User actions -->
    <div class="header__actions">
      <button class="header__action-btn" aria-label="Notifications">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
      </button>
      
      <a href="{{ routes.cart_url }}" class="header__action-btn" aria-label="Shopping cart">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <path d="M16 10a4 4 0 0 1-8 0"></path>
        </svg>
        <span class="cart-count-bubble">
          <span aria-hidden="true">{{ cart.item_count }}</span>
          <span class="visually-hidden">{{ 'sections.header.cart_count' | t: count: cart.item_count }}</span>
        </span>
      </a>
      
      <a href="{{ routes.account_url }}" class="header__action-btn" aria-label="Account">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
      </a>
    </div>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const header = document.querySelector('.header');
    const brandText = document.getElementById('brand-text');
    let isScrolled = false;

    function handleScroll() {
      const scrollY = window.scrollY;
      const shouldShowBrand = scrollY > 50;
      
      if (shouldShowBrand !== isScrolled) {
        isScrolled = shouldShowBrand;
        
        if (isScrolled) {
          header.classList.add('scrolled');
          brandText.style.opacity = '1';
        } else {
          header.classList.remove('scrolled');
          brandText.style.opacity = '0';
        }
      }
    }

    window.addEventListener('scroll', handleScroll);
    handleScroll(); // Check initial state
  });
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "text",
      "id": "brand_name",
      "label": "Brand Name",
      "default": "Painted Juttay"
    },
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Menu"
    },
    {
      "type": "select",
      "id": "menu_type_desktop",
      "options": [
        {
          "value": "dropdown",
          "label": "Dropdown"
        },
        {
          "value": "mega",
          "label": "Mega"
        },
        {
          "value": "drawer",
          "label": "Drawer"
        }
      ],
      "default": "dropdown",
      "label": "Menu type"
    },
    {
      "type": "checkbox",
      "id": "sticky_header_type",
      "default": true,
      "label": "Sticky header"
    },
    {
      "type": "checkbox",
      "id": "show_line_separator",
      "default": true,
      "label": "Show line separator"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "Accent 1"
        },
        {
          "value": "accent-2",
          "label": "Accent 2"
        },
        {
          "value": "background-1",
          "label": "Background 1"
        },
        {
          "value": "background-2",
          "label": "Background 2"
        },
        {
          "value": "inverse",
          "label": "Inverse"
        }
      ],
      "default": "background-1",
      "label": "Color scheme"
    }
  ]
}
{% endschema %}