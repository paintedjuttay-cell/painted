
{%- style -%}
  .custom-order-{{ section.id }} {
    padding: 5rem 0;
    background: hsl(var(--color-secondary));
  }
  
  .custom-order-container-{{ section.id }} {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }
  
  .custom-order-header-{{ section.id }} {
    text-align: center;
    margin-bottom: 4rem;
  }
  
  .custom-order-title-{{ section.id }} {
    font-family: 'Playfair Display', serif;
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 700;
    color: hsl(var(--color-foreground));
    margin-bottom: 1rem;
  }
  
  .custom-order-subtitle-{{ section.id }} {
    font-size: 1.125rem;
    color: hsl(var(--color-muted-foreground));
    max-width: 42rem;
    margin: 0 auto;
  }
  
  .custom-form-{{ section.id }} {
    background: hsl(var(--color-card));
    padding: 3rem;
    border-radius: 1rem;
    border: 1px solid hsl(var(--color-border));
    max-width: 800px;
    margin: 0 auto;
  }
  
  .form-grid-{{ section.id }} {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
  }
  
  .form-group-{{ section.id }} {
    margin-bottom: 2rem;
  }
  
  .form-label-{{ section.id }} {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: hsl(var(--color-foreground));
  }
  
  .form-input-{{ section.id }}, 
  .form-textarea-{{ section.id }}, 
  .form-select-{{ section.id }} {
    width: 100%;
    padding: 1rem;
    border: 1px solid hsl(var(--color-border));
    border-radius: 0.5rem;
    font-size: 1rem;
    background: hsl(var(--color-background));
    color: hsl(var(--color-foreground));
    transition: border-color 0.3s ease;
  }
  
  .form-input-{{ section.id }}:focus, 
  .form-textarea-{{ section.id }}:focus, 
  .form-select-{{ section.id }}:focus {
    outline: none;
    border-color: hsl(var(--color-primary));
    box-shadow: 0 0 0 2px hsla(var(--color-primary) / 0.2);
  }
  
  .form-textarea-{{ section.id }} {
    min-height: 120px;
    resize: vertical;
  }
  
  .price-display-{{ section.id }} {
    background: hsla(var(--color-primary) / 0.1);
    padding: 1.5rem;
    border-radius: 0.5rem;
    text-align: center;
    margin: 2rem 0;
  }
  
  .price-amount-{{ section.id }} {
    font-size: 2rem;
    font-weight: bold;
    color: hsl(var(--color-primary));
  }
  
  .submit-btn-{{ section.id }} {
    width: 100%;
    padding: 1rem 2rem;
    background: linear-gradient(135deg, hsl(var(--color-primary)) 0%, hsl(262 83% 68%) 100%);
    color: white;
    border: none;
    border-radius: 0.5rem;
    font-weight: 600;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .submit-btn-{{ section.id }}:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px hsla(var(--color-primary) / 0.3);
  }
  
  @media (max-width: 768px) {
    .custom-form-{{ section.id }} {
      padding: 2rem;
    }
    
    .form-grid-{{ section.id }} {
      grid-template-columns: 1fr;
    }
  }
{%- endstyle -%}

<section class="custom-order-{{ section.id }}" id="custom-order">
  <div class="custom-order-container-{{ section.id }}">
    <div class="custom-order-header-{{ section.id }}">
      <h2 class="custom-order-title-{{ section.id }}">
        {{ section.settings.title | default: "Commission Your Art" }}
      </h2>
      <p class="custom-order-subtitle-{{ section.id }}">
        {{ section.settings.subtitle | default: "Work with our talented artists to create a completely unique pair that tells your story." }}
      </p>
    </div>

    <form class="custom-form-{{ section.id }}" action="{{ routes.cart_add_url }}" method="post" enctype="multipart/form-data" id="custom-order-form-{{ section.id }}">
      <div class="form-grid-{{ section.id }}">
        <div class="form-group-{{ section.id }}">
          <label class="form-label-{{ section.id }}" for="shoe-type-{{ section.id }}">Shoe Type</label>
          <select class="form-select-{{ section.id }}" id="shoe-type-{{ section.id }}" name="properties[Shoe Type]" required>
            <option value="">Select shoe type</option>
            <option value="sneakers">Sneakers</option>
            <option value="boots">Boots</option>
            <option value="canvas-shoes">Canvas Shoes</option>
            <option value="high-tops">High Tops</option>
            <option value="custom">Custom Base</option>
          </select>
        </div>

        <div class="form-group-{{ section.id }}">
          <label class="form-label-{{ section.id }}" for="shoe-size-{{ section.id }}">Size</label>
          <select class="form-select-{{ section.id }}" id="shoe-size-{{ section.id }}" name="properties[Size]" required>
            <option value="">Select size</option>
            {%- for i in (6..13) -%}
              <option value="{{ i }}">{{ i }}</option>
            {%- endfor -%}
          </select>
        </div>
      </div>

      <div class="form-group-{{ section.id }}">
        <label class="form-label-{{ section.id }}" for="art-style-{{ section.id }}">Art Style</label>
        <select class="form-select-{{ section.id }}" id="art-style-{{ section.id }}" name="properties[Art Style]">
          <option value="">Select preferred style</option>
          <option value="abstract">Abstract</option>
          <option value="realistic">Realistic</option>
          <option value="geometric">Geometric</option>
          <option value="floral">Floral</option>
          <option value="cultural">Cultural/Traditional</option>
          <option value="street-art">Street Art</option>
          <option value="custom">Custom Style</option>
        </select>
      </div>

      <div class="form-group-{{ section.id }}">
        <label class="form-label-{{ section.id }}" for="design-description-{{ section.id }}">Design Description</label>
        <textarea 
          class="form-textarea-{{ section.id }}" 
          id="design-description-{{ section.id }}" 
          name="properties[Design Description]" 
          placeholder="Describe your vision, preferred colors, themes, or any specific elements you'd like included..."
          required
        ></textarea>
      </div>

      <div class="form-grid-{{ section.id }}">
        <div class="form-group-{{ section.id }}">
          <label class="form-label-{{ section.id }}" for="timeline-{{ section.id }}">Timeline</label>
          <select class="form-select-{{ section.id }}" id="timeline-{{ section.id }}" name="properties[Timeline]">
            <option value="standard">Standard (2-3 weeks)</option>
            <option value="rush">Rush (1-2 weeks) +$50</option>
            <option value="express">Express (3-5 days) +$100</option>
          </select>
        </div>

        <div class="form-group-{{ section.id }}">
          <label class="form-label-{{ section.id }}" for="budget-{{ section.id }}">Budget Range</label>
          <select class="form-select-{{ section.id }}" id="budget-{{ section.id }}" name="properties[Budget]">
            <option value="standard">$150-$200 (Standard)</option>
            <option value="premium">$200-$300 (Premium)</option>
            <option value="luxury">$300+ (Luxury)</option>
          </select>
        </div>
      </div>

      <div class="price-display-{{ section.id }}">
        <div style="margin-bottom: 0.5rem; color: hsl(var(--color-muted-foreground));">Estimated Price</div>
        <div class="price-amount-{{ section.id }}" id="estimated-price-{{ section.id }}">$200</div>
        <div style="font-size: 0.9rem; color: hsl(var(--color-muted-foreground)); margin-top: 0.5rem;">
          *Final price confirmed after consultation
        </div>
      </div>

      <div class="form-group-{{ section.id }}">
        <label class="form-label-{{ section.id }}" for="contact-info-{{ section.id }}">Contact Information</label>
        <input 
          type="email" 
          class="form-input-{{ section.id }}" 
          id="contact-info-{{ section.id }}" 
          name="properties[Email]" 
          placeholder="your@email.com"
          required
        >
      </div>

      {%- comment -%} Hidden product ID for custom orders {%- endcomment -%}
      {%- if section.settings.custom_order_product != blank -%}
        <input type="hidden" name="id" value="{{ section.settings.custom_order_product.selected_or_first_available_variant.id }}">
      {%- endif -%}

      <button type="submit" class="submit-btn-{{ section.id }}">
        Request Custom Quote
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-left: 0.5rem;">
          <path d="M7 17L17 7M17 7H7M17 7V17"></path>
        </svg>
      </button>
    </form>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('custom-order-form-{{ section.id }}');
    const priceDisplay = document.getElementById('estimated-price-{{ section.id }}');
    const timelineSelect = document.getElementById('timeline-{{ section.id }}');
    const budgetSelect = document.getElementById('budget-{{ section.id }}');
    
    function updatePrice() {
      let basePrice = 200;
      
      // Timeline adjustments
      const timeline = timelineSelect.value;
      if (timeline === 'rush') basePrice += 50;
      if (timeline === 'express') basePrice += 100;
      
      // Budget adjustments
      const budget = budgetSelect.value;
      if (budget === 'premium') basePrice = 250;
      if (budget === 'luxury') basePrice = 350;
      
      priceDisplay.textContent = '$' + basePrice;
    }
    
    timelineSelect.addEventListener('change', updatePrice);
    budgetSelect.addEventListener('change', updatePrice);
    
    // Form submission
    form.addEventListener('submit', function(e) {
      // Add any custom validation or processing here
      console.log('Custom order form submitted');
    });
  });
</script>

{% schema %}
{
  "name": "Custom Order",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Commission Your Art"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Work with our talented artists to create a completely unique pair that tells your story."
    },
    {
      "type": "product",
      "id": "custom_order_product",
      "label": "Custom Order Product",
      "info": "Select a product to handle custom orders in your cart"
    }
  ],
  "presets": [
    {
      "name": "Custom Order"
    }
  ]
}
{% endschema %}
